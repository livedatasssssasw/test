import"./hfqw-02fd339b.js";import{E as t,H as e,D as n,b as r,F as i}from"./kb7qbB-ac3ab9b0.js";import{c as o,W as a,a as s,i as u}from"./tAjMY-e313960a.js";import{t as c,u as l,v as d,w as f,L as m,x as h,y as v,z as y,B as b,D as p,F as g,G as w,H as x,c as P,J as F,I as k,M as R,N as C,Q as B,V as j,X as G,Y as I,Z as O,_ as T,$ as S,a0 as M,a1 as H,a2 as E,a3 as q,a4 as A,a5 as _,a6 as D,a7 as L,a8 as N,a9 as W,aa as U}from"./R-b7a7c4fe.js";import"./mdUzkB4AE-494f5875.js";import{b as z,g as J,W as K,i as V,e as Q,j as X,k as Y,a as $,f as Z,l as tt}from"./DIQ-ed740347.js";import{c as et,d as nt,f as rt,h as it,j as ot,k as at,m as st,o as ut,p as ct,q as lt,r as dt,t as ft,v as mt,w as ht,x as vt,y as yt,z as bt,A as pt,B as gt,C as wt,D as xt,E as Pt,F as Ft,G as kt,H as Rt,I as Ct,J as Bt,K as jt,L as Gt,M as It,N as Ot,O as Tt,P as St,Q as Mt,R as Ht,S as Et,T as qt,U as At,V as _t,W as Dt,X as Lt,Y as Nt}from"./Sf-b6194174.js";import{T as Wt,p as Ut,C as zt}from"./JD5Jh5-56f0f7ee.js";import"./KVwX9K4ySf-5e15b3fe.js";import{t as Jt,D as Kt,G as Vt,o as Qt,v as Xt,F as Yt,M as $t,N as Zt,O as te,w as ee,n as ne,P as re,k as ie,i as oe,Q as ae}from"./dv-4fb157f2.js";import{g as se}from"./GkrUsFygAk-f5882e55.js";import{g as ue,l as ce,m as le}from"./9DZWlQC-23059f6d.js";const de={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},fe={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},me={type:"object",properties:{gasPrice:{type:"null"}}},he=(t,e,n)=>{try{J.validateJSONSchema(t,e)}catch(r){if(r instanceof K)throw new c(r.errors,n);throw r}},ve=n=>{var r,i;const o=n;if(!z(o.type)){let e;switch(o.type){case"0x0":e=de;break;case"0x1":e=fe;break;case"0x2":e=me;break;default:return Kt({format:"uint"},o.type,t)}return he(e,o,o.type),Kt({format:"uint"},o.type,t)}if(!z(o.maxFeePerGas)||!z(o.maxPriorityFeePerGas))return he(me,o,"0x2"),"0x2";if(!z(o.accessList))return he(fe,o,"0x1"),"0x1";const a=null!==(r=o.hardfork)&&void 0!==r?r:null===(i=o.common)||void 0===i?void 0:i.hardfork;if(!z(a)){const t=Object.keys(e).indexOf(a);if(t>=Object.keys(e).indexOf("london"))return z(o.gasPrice)?"0x2":"0x0";if(t===Object.keys(e).indexOf("berlin"))return"0x0"}return z(o.gasPrice)?void 0:(he(de,o,"0x0"),"0x0")},ye=(t,e)=>{var n;return(null!==(n=null==e?void 0:e.transactionTypeParser)&&void 0!==n?n:ve)(t)},be=t=>t[0]>127?"0x0":Jt(t[0]),pe={type:"array",items:Object.assign({},{type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}})},ge={type:"object",properties:{accessList:Object.assign({},pe),gasUsed:{type:"string"}}},we={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},xe={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},Pe={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},pe),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},we),hardfork:Object.assign({},xe),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},{type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}}),baseChain:Object.assign({},we),hardfork:Object.assign({},xe)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},Fe={type:"object",properties:Object.assign(Object.assign({},Pe.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},pe),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},ke={type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}},Re={type:"object",properties:{baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},Fe)},{type:"array",items:{format:"bytes32"}}]},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},ke)},withdrawalsRoot:{format:"bytes32"}}},Ce={type:"object",properties:{author:{format:"bytes32"},excessDataGas:{format:"uint"},baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{type:"array",items:{format:"bytes32"}},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},ke)},withdrawalsRoot:{format:"bytes32"}}},Be={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},je={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},Ge={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},Be)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},Ie={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},Oe={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},Te={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},{type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}})}}};function Se(t,e=n,r={transactionSchema:Fe,fillInputAndData:!1}){var i,o;let a=Vt({},t);if(z(null==t?void 0:t.common)||(a.common=Object.assign({},t.common),z(null===(i=t.common)||void 0===i?void 0:i.customChain)||(a.common.customChain=Object.assign({},t.common.customChain))),a=Kt(null!==(o=r.transactionSchema)&&void 0!==o?o:Fe,a,e),!z(a.data)&&!z(a.input)&&Jt(a.data)!==Jt(a.input))throw new l({data:Qt(a.data),input:Qt(a.input)});return r.fillInputAndData&&(z(a.data)?z(a.input)||(a.data=a.input):a.input=a.data),z(a.gasLimit)||(a.gas=a.gasLimit,delete a.gasLimit),a}const Me="ALLEVENTS",He={name:Me,signature:"",type:"event",inputs:[]},Ee={bytes:r.HEX,number:i.NUMBER};var qe=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function Ae(e,n,r){return qe(this,void 0,void 0,(function*(){const i=Le(e,n);if(!z(i)){if(i.startsWith("-"))throw new d(i);if(Number(i)<0||Number(i)>127)throw new d(i);if(z(e.gasPrice)&&("0x0"===i||"0x1"===i))return{gasPrice:yield fn(n,r),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if("0x2"===i)return Object.assign({gasPrice:void 0},yield function(e,n,r){var i,o,a,s;return qe(this,void 0,void 0,(function*(){const u=yield hn(n,n.defaultBlock,!1,t);if(z(u.baseFeePerGas))throw new f;let c;if(z(e.gasPrice)&&BigInt(u.baseFeePerGas)===BigInt(0)&&(c=yield fn(n,r)),!z(e.gasPrice)||!z(c)){const t=Kt({format:"uint"},null!==(i=e.gasPrice)&&void 0!==i?i:c,r);return{maxPriorityFeePerGas:t,maxFeePerGas:t}}return{maxPriorityFeePerGas:Kt({format:"uint"},null!==(o=e.maxPriorityFeePerGas)&&void 0!==o?o:n.defaultMaxPriorityFeePerGas,r),maxFeePerGas:Kt({format:"uint"},null!==(a=e.maxFeePerGas)&&void 0!==a?a:BigInt(u.baseFeePerGas)*BigInt(2)+BigInt(null!==(s=e.maxPriorityFeePerGas)&&void 0!==s?s:n.defaultMaxPriorityFeePerGas),r)}}))}(e,n,r))}}))}var _e=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};const De=(t,e,n,r)=>{if(void 0!==n&&t in n&&void 0!==n[t]){if("string"==typeof n[t]&&V(n[t]))return n[t];if(!Q(n[t])&&X(n[t])){if(e.wallet){const r=e.wallet.get(Kt({format:"uint"},n[t],Ee));if(!z(r))return r.address;throw new m}throw new m}throw"from"===t?new h(n.from):new v(n.to)}if("from"===t){if(!z(r))return Ut(r);if(!z(e.defaultAccount))return e.defaultAccount}},Le=(e,n)=>{const r=ye(e,n);return z(r)?z(n.defaultTransactionType)?void 0:Kt({format:"uint"},n.defaultTransactionType,t):r};function Ne(e){var n,r;return _e(this,void 0,void 0,(function*(){let i=Kt(Pe,e.transaction,e.web3Context.defaultReturnFormat);if(z(i.from)&&(i.from=De("from",e.web3Context,void 0,e.privateKey)),z(i.nonce)&&(i.nonce=yield((t,e,n=t.defaultReturnFormat)=>_e(void 0,void 0,void 0,(function*(){if(z(e))throw new y;return yn(t,e,t.defaultBlock,n)})))(e.web3Context,i.from,t)),z(i.value)&&(i.value="0x0"),z(i.data))z(i.input)?i.input="0x":i.input.startsWith("0x")||(i.input=`0x${i.input}`);else{if(!z(i.input)&&i.data!==i.input)throw new l({data:Qt(i.data),input:Qt(i.input)});i.data.startsWith("0x")||(i.data=`0x${i.data}`)}if(z(i.common)){if(e.web3Context.defaultCommon){const t=e.web3Context.defaultCommon,n=t.customChain.chainId,r=t.customChain.networkId,o=t.customChain.name;i.common=Object.assign(Object.assign({},t),{customChain:{chainId:n,networkId:r,name:o}})}z(i.chain)&&(i.chain=e.web3Context.defaultChain),z(i.hardfork)&&(i.hardfork=e.web3Context.defaultHardfork)}if(z(i.chainId)&&z(null===(n=i.common)||void 0===n?void 0:n.customChain.chainId)&&(i.chainId=yield Pn(e.web3Context,t)),z(i.networkId)&&(i.networkId=null!==(r=e.web3Context.defaultNetworkId)&&void 0!==r?r:yield se(e.web3Context,t)),z(i.gasLimit)&&!z(i.gas)&&(i.gasLimit=i.gas),i.type=Le(i,e.web3Context),!z(i.accessList)||"0x1"!==i.type&&"0x2"!==i.type||(i.accessList=[]),e.fillGasPrice&&(i=Object.assign(Object.assign({},i),yield Ae(i,e.web3Context,t))),z(i.gas)&&z(i.gasLimit)&&e.fillGasLimit){const n=yield wn(e.web3Context,i,"latest",t);i=Object.assign(Object.assign({},i),{gas:Kt({format:"uint"},n,t)})}return i}))}var We=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function Ue(t,e,n){const r=t.transactionPollingInterval,[i,o]=$t((()=>We(this,void 0,void 0,(function*(){let r;try{r=yield mn(t,Ee)}catch(o){return}const i=r-e;if(i>=t.transactionBlockTimeout)return new b({starterBlockNumber:e,numberOfBlocks:i,transactionHash:n})}))),r);return[o,{clean:()=>{clearInterval(i)}}]}function ze(t,e){var n,r;return We(this,void 0,void 0,(function*(){const{provider:i}=t.requestManager;let o;const a=yield mn(t,Ee);return o=(null===(r=(n=i).supportsSubscriptions)||void 0===r?void 0:r.call(n))&&t.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?yield function(t,e,n){var r;return We(this,void 0,void 0,(function*(){let i,o,a=!0;function s(r,i){o.clean(),a=!1;const[s,u]=Ue(t,e,n);o.clean=u.clean,s.catch((t=>r(t)))}try{i=yield null===(r=t.subscriptionManager)||void 0===r?void 0:r.subscribe("newHeads"),o={clean:()=>{var e;i.id&&(null===(e=t.subscriptionManager)||void 0===e||e.removeSubscription(i).then((()=>{})).catch((()=>{})))}}}catch(u){return Ue(t,e,n)}return[new Promise(((r,o)=>{try{i.on("data",(r=>{if(a=!1,!(null==r?void 0:r.number))return;const i=Number(BigInt(r.number)-BigInt(e));i>=t.transactionBlockTimeout&&o(new b({starterBlockNumber:e,numberOfBlocks:i,transactionHash:n}))})),i.on("error",(t=>{s(o)}))}catch(u){s(o)}setTimeout((()=>{a&&s(o)}),1e3*t.blockHeaderTimeout)})),o]}))}(t,a,e):Ue(t,a,e),o}))}var Je=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function Ke(t,e,n){return Je(this,void 0,void 0,(function*(){const[r,i]=Zt(t.transactionSendTimeout,new p({numberOfSeconds:t.transactionSendTimeout/1e3,transactionHash:n})),[o,a]=yield ze(t,n);try{return yield Promise.race([e(),i,o])}finally{clearTimeout(r),a.clean()}}))}var Ve=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function Qe(t,e,n,r){var i;return Ve(this,void 0,void 0,(function*(){const o=null!==(i=t.transactionReceiptPollingInterval)&&void 0!==i?i:t.transactionPollingInterval,[a,s]=te((()=>Ve(this,void 0,void 0,(function*(){try{return(null!=r?r:vn)(t,e,n)}catch(i){return}}))),o),[u,c]=Zt(t.transactionPollingTimeout,new g({numberOfSeconds:t.transactionPollingTimeout/1e3,transactionHash:e})),[l,d]=yield ze(t,e);try{return yield Promise.race([a,c,l])}finally{u&&clearTimeout(u),s&&clearInterval(s),d.clean()}}))}var Xe=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};const Ye=({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:i})=>{var o;let a=1;const s=setInterval((()=>{Xe(void 0,void 0,void 0,(function*(){a>=t.transactionConfirmationBlocks&&clearInterval(s);const o=yield et(t.requestManager,ee(BigInt(e.blockNumber)+BigInt(a)),!1);(null==o?void 0:o.hash)&&(a+=1,n.emit("confirmation",{confirmations:Kt({format:"uint"},a,i),receipt:Kt(null!=r?r:Ge,e,i),latestBlockHash:Kt({format:"bytes32"},o.hash,i)}))}))}),null!==(o=t.transactionReceiptPollingInterval)&&void 0!==o?o:t.transactionPollingInterval)};var $e=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function Ze(t,e,n,r,i,o){if(z(n)||z(n.blockHash))throw new w({receipt:n,blockHash:Kt({format:"bytes32"},null==n?void 0:n.blockHash,i),transactionHash:Kt({format:"bytes32"},r,i)});if(!n.blockNumber)throw new x({receipt:n});e.emit("confirmation",{confirmations:Kt({format:"uint"},1,i),receipt:Kt(null!=o?o:Ge,n,i),latestBlockHash:Kt({format:"bytes32"},n.blockHash,i)});const a=t.requestManager.provider;a&&"supportsSubscriptions"in a&&a.supportsSubscriptions()?(({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:i})=>{let o,a=!0;setImmediate((()=>{var s;null===(s=t.subscriptionManager)||void 0===s||s.subscribe("newHeads").then((s=>{s.on("data",(u=>$e(void 0,void 0,void 0,(function*(){var c;if(a=!1,!(null==u?void 0:u.number)||o===(null==u?void 0:u.parentHash))return;o=null==u?void 0:u.parentHash;const l=BigInt(u.number)-BigInt(e.blockNumber)+BigInt(1);n.emit("confirmation",{confirmations:Kt({format:"uint"},l,i),receipt:Kt(null!=r?r:Ge,e,i),latestBlockHash:Kt({format:"bytes32"},u.parentHash,i)}),l>=t.transactionConfirmationBlocks&&(yield null===(c=t.subscriptionManager)||void 0===c?void 0:c.removeSubscription(s))})))),s.on("error",(()=>$e(void 0,void 0,void 0,(function*(){var o;yield null===(o=t.subscriptionManager)||void 0===o?void 0:o.removeSubscription(s),a=!1,Ye({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:i})}))))})).catch((()=>{a=!1,Ye({web3Context:t,transactionReceipt:e,customTransactionReceiptSchema:r,transactionPromiEvent:n,returnFormat:i})}))})),setTimeout((()=>{a&&Ye({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,returnFormat:i})}),1e3*t.blockHeaderTimeout)})({web3Context:t,transactionReceipt:n,transactionPromiEvent:e,customTransactionReceiptSchema:o,returnFormat:i}):Ye({web3Context:t,transactionReceipt:n,transactionPromiEvent:e,customTransactionReceiptSchema:o,returnFormat:i})}var tn=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};const en=(t,e)=>{var n,r,i,o,a;if(t instanceof P&&t.cause instanceof F){if(void 0!==e){const i=e.filter((t=>ue(t)));return ce(i,t.cause),{reason:t.cause.message,signature:null===(n=t.cause.data)||void 0===n?void 0:n.slice(0,10),data:null===(r=t.cause.data)||void 0===r?void 0:r.substring(10),customErrorName:t.cause.errorName,customErrorDecodedSignature:t.cause.errorSignature,customErrorArguments:t.cause.errorArgs}}return{reason:t.cause.message,signature:null===(i=t.cause.data)||void 0===i?void 0:i.slice(0,10),data:null===(o=t.cause.data)||void 0===o?void 0:o.substring(10)}}if(t instanceof k&&!Array.isArray(null===(a=t.cause)||void 0===a?void 0:a.errors)&&void 0!==t.cause)return t.cause.message;throw t};function nn(t,e,n,r=t.defaultReturnFormat){return tn(this,void 0,void 0,(function*(){try{return void(yield gn(t,e,t.defaultBlock,r))}catch(i){return en(i,n)}}))}var rn=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function on(t,e,n,r,i,o){return rn(this,void 0,void 0,(function*(){let a,s=o;if(void 0===s&&(void 0!==r?s=en(r):t.handleRevert&&void 0!==e&&(s=yield nn(t,e,i))),void 0===s)a=new R(n);else if("string"==typeof s)a=new C(s,void 0,n);else if(void 0!==s.customErrorName&&void 0!==s.customErrorDecodedSignature&&void 0!==s.customErrorArguments){const t=s;a=new B(t.reason,t.customErrorName,t.customErrorDecodedSignature,t.customErrorArguments,t.signature,n,t.data)}else a=new C(s.reason,s.signature,n,s.data);return a}))}const an=(t,e,r,i=n)=>{var o,a,s,u,c;let l=Object.assign({},t);const d=Kt(Be,e,i);if([Me,"allEvents"].includes(l.name)){const t=r.find((t=>t.signature===e.topics[0]));l=t||{anonymous:!0}}if(l.inputs=null!==(a=null!==(o=l.inputs)&&void 0!==o?o:t.inputs)&&void 0!==a?a:[],!l.anonymous){let t=0;(null!==(s=l.inputs)&&void 0!==s?s:[]).forEach((e=>{e.indexed&&(t+=1)})),t>0&&(null==e?void 0:e.topics)&&(null==e?void 0:e.topics.length)!==t+1&&(l=Object.assign(Object.assign({},l),{anonymous:!0,inputs:[]}))}const f=l.anonymous?e.topics:(null!==(u=e.topics)&&void 0!==u?u:[]).slice(1);return Object.assign(Object.assign({},d),{returnValues:le([...null!==(c=l.inputs)&&void 0!==c?c:[]],e.data,f),event:l.name,signature:!l.anonymous&&e.topics&&0!==e.topics.length&&e.topics[0]?e.topics[0]:void 0,raw:{data:e.data,topics:e.topics}})};var sn=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};class un{constructor({options:t,web3Context:e,promiEvent:n,returnFormat:r}){this.options={checkRevertBeforeSending:!0},this.options=t,this.web3Context=e,this.promiEvent=n,this.returnFormat=r}getReceiptWithEvents(t){var e,n;const r=Object.assign({},null!=t?t:{});if((null===(e=this.options)||void 0===e?void 0:e.contractAbi)&&r.logs&&r.logs.length>0){r.events={};for(const t of r.logs){const e=an(He,t,null===(n=this.options)||void 0===n?void 0:n.contractAbi,this.returnFormat);e.event&&(r.events[e.event]=e)}}return r}checkRevertBeforeSending(t){return sn(this,void 0,void 0,(function*(){if(!1!==this.options.checkRevertBeforeSending){let e=t;z(t.data)&&z(t.input)&&z(t.gas)&&(e=Object.assign(Object.assign({},t),{gas:21e3}));const n=yield nn(this.web3Context,e,this.options.contractAbi);if(void 0!==n)throw yield on(this.web3Context,t,void 0,void 0,this.options.contractAbi,n)}}))}emitSending(t){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",t)}populateGasPrice({transactionFormatted:e,transaction:n}){var r;return sn(this,void 0,void 0,(function*(){let i=e;return!(null===(r=this.options)||void 0===r?void 0:r.ignoreGasPricing)&&z(e.gasPrice)&&(z(n.maxPriorityFeePerGas)||z(n.maxFeePerGas))&&(i=Object.assign(Object.assign({},e),yield Ae(e,this.web3Context,t))),i}))}signAndSend({wallet:t,tx:e}){return sn(this,void 0,void 0,(function*(){if(t){const n=yield t.signTransaction(e);return Ke(this.web3Context,(()=>sn(this,void 0,void 0,(function*(){return nt(this.web3Context.requestManager,n.rawTransaction)}))),n.transactionHash)}return Ke(this.web3Context,(()=>sn(this,void 0,void 0,(function*(){return rt(this.web3Context.requestManager,e)}))))}))}emitSent(t){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",t)}emitTransactionHash(t){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",t)}emitReceipt(t){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",t)}handleError({error:t,tx:e}){var n;return sn(this,void 0,void 0,(function*(){let r=t;return r instanceof P&&this.web3Context.handleRevert&&(r=yield on(this.web3Context,e,void 0,void 0,null===(n=this.options)||void 0===n?void 0:n.contractAbi)),(r instanceof k||r instanceof P||r instanceof B||r instanceof R||r instanceof C||r instanceof g)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",r),r}))}emitConfirmation({receipt:t,transactionHash:e,customTransactionReceiptSchema:n}){this.promiEvent.listenerCount("confirmation")>0&&Ze(this.web3Context,this.promiEvent,t,e,this.returnFormat,n)}handleResolve({receipt:t,tx:e}){var n,r,i;return sn(this,void 0,void 0,(function*(){if(null===(n=this.options)||void 0===n?void 0:n.transactionResolver)return null===(r=this.options)||void 0===r?void 0:r.transactionResolver(t);if(t.status===BigInt(0)){const n=yield on(this.web3Context,e,t,void 0,null===(i=this.options)||void 0===i?void 0:i.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",n),n}return t}))}}var cn=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},ln=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const dn=t=>cn(void 0,void 0,void 0,(function*(){return it(t.requestManager)}));function fn(t,e){return cn(this,void 0,void 0,(function*(){const n=yield at(t.requestManager);return Kt({format:"uint"},n,null!=e?e:t.defaultReturnFormat)}))}function mn(t,e){return cn(this,void 0,void 0,(function*(){const n=yield ut(t.requestManager);return Kt({format:"uint"},n,null!=e?e:t.defaultReturnFormat)}))}function hn(e,n=e.defaultBlock,r=!1,i){return cn(this,void 0,void 0,(function*(){let o;if($(n)){const i=Kt({format:"bytes32"},n,t);o=yield ft(e.requestManager,i,r)}else{const i=Y(n)?n:Kt({format:"uint"},n,t);o=yield et(e.requestManager,i,r)}return Kt(Re,o,null!=i?i:e.defaultReturnFormat)}))}function vn(t,e,r){return cn(this,void 0,void 0,(function*(){const i=Kt({format:"bytes32"},e,n),o=yield Ft(t.requestManager,i);return z(o)?o:Kt(Ge,o,null!=r?r:t.defaultReturnFormat)}))}function yn(e,n,r=e.defaultBlock,i){return cn(this,void 0,void 0,(function*(){const o=Y(r)?r:Kt({format:"uint"},r,t),a=yield kt(e.requestManager,n,o);return Kt({format:"uint"},a,null!=i?i:e.defaultReturnFormat)}))}function bn(e,n,r,i={checkRevertBeforeSending:!0}){const a=new o(((o,s)=>{setImmediate((()=>{(()=>{cn(this,void 0,void 0,(function*(){const u=new un({web3Context:e,promiEvent:a,options:i,returnFormat:r});let c=Se(Object.assign(Object.assign({},n),{from:De("from",e,n),to:De("to",e,n)}),t);try{let t;c=yield u.populateGasPrice({transaction:n,transactionFormatted:c}),yield u.checkRevertBeforeSending(c),u.emitSending(c),e.wallet&&!z(c.from)&&(t=e.wallet.get(c.from));const i=yield u.signAndSend({wallet:t,tx:c}),a=Kt({format:"bytes32"},i,null!=r?r:e.defaultReturnFormat);u.emitSent(c),u.emitTransactionHash(a);const s=yield Qe(e,i,null!=r?r:e.defaultReturnFormat),l=u.getReceiptWithEvents(Kt(Ge,s,null!=r?r:e.defaultReturnFormat));u.emitReceipt(l),o(yield u.handleResolve({receipt:l,tx:c})),u.emitConfirmation({receipt:l,transactionHash:i})}catch(l){s(yield u.handleError({error:l,tx:c}))}}))})()}))}));return a}function pn(e,n,r=e.defaultReturnFormat){return cn(this,void 0,void 0,(function*(){const i=yield Ct(e.requestManager,Se(n,t));return Z(i)?function(t,e,n={fillInputAndData:!1}){return{raw:Kt({format:"bytes"},t,e),tx:Se(Object.assign(Object.assign({},Wt.fromSerializedData(Xt(t)).toJSON()),{hash:Qt(Yt(Xt(t))),type:be(Xt(t))}),e,{fillInputAndData:n.fillInputAndData})}}(i,r,{fillInputAndData:!0}):{raw:Kt({format:"bytes"},i.raw,r),tx:Se(i.tx,r,{fillInputAndData:!0})}}))}function gn(e,n,r=e.defaultBlock,i=e.defaultReturnFormat){return cn(this,void 0,void 0,(function*(){const o=Y(r)?r:Kt({format:"uint"},r,t),a=yield Bt(e.requestManager,Se(n,t),o);return Kt({format:"bytes"},a,i)}))}function wn(e,n,r=e.defaultBlock,i){return cn(this,void 0,void 0,(function*(){const o=Se(n,t),a=Y(r)?r:Kt({format:"uint"},r,t),s=yield jt(e.requestManager,o,a);return Kt({format:"uint"},s,null!=i?i:e.defaultReturnFormat)}))}function xn(t,e,n){return cn(this,void 0,void 0,(function*(){let{toBlock:r,fromBlock:i}=e;z(r)||"number"!=typeof r&&"bigint"!=typeof r||(r=ee(r)),z(i)||"number"!=typeof i&&"bigint"!=typeof i||(i=ee(i));const o=Object.assign(Object.assign({},e),{fromBlock:i,toBlock:r});return(yield Gt(t.requestManager,o)).map((e=>"string"==typeof e?e:Kt(Be,e,null!=n?n:t.defaultReturnFormat)))}))}function Pn(t,e){return cn(this,void 0,void 0,(function*(){const n=yield It(t.requestManager);return Kt({format:"uint"},n,null!=e?e:t.defaultReturnFormat)}))}function Fn(e,n,r=e.defaultBlock,i){return cn(this,void 0,void 0,(function*(){const o=Y(r)?r:Kt({format:"uint"},r,t),a=yield St(e.requestManager,Se(n,t),o);return Kt(ge,a,null!=i?i:e.defaultReturnFormat)}))}class kn extends a{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(t){return Kt(Be,t,super.returnFormat)}}class Rn extends a{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(t){return Kt({format:"string"},t,super.returnFormat)}}class Cn extends a{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(t){return Kt(Ce,t,super.returnFormat)}}class Bn extends a{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(t){if("boolean"==typeof t)this.emit("changed",t);else{const e=Object.fromEntries(Object.entries(t.status).map((([t,e])=>[t.charAt(0).toLowerCase()+t.substring(1),e])));this.emit("changed",t.syncing),this.emit("data",Kt(je,e,super.returnFormat))}}}var jn=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};const Gn={logs:kn,newPendingTransactions:Rn,newHeads:Cn,syncing:Bn,pendingTransactions:Rn,newBlockHeaders:Cn};class In extends s{constructor(t){"string"==typeof t||u(t)?super({provider:t,registeredSubscriptions:Gn}):t.registeredSubscriptions?super(t):(super(Object.assign(Object.assign({},t),{registeredSubscriptions:Gn})),this.getFeeData=this.calculateFeeData)}getProtocolVersion(){return jn(this,void 0,void 0,(function*(){return Ht(this.requestManager)}))}isSyncing(){return jn(this,void 0,void 0,(function*(){return it(this.requestManager)}))}getCoinbase(){return jn(this,void 0,void 0,(function*(){return Et(this.requestManager)}))}isMining(){return jn(this,void 0,void 0,(function*(){return qt(this.requestManager)}))}getHashrate(t){var e;return void 0===t&&(t=null!==(e=this.defaultReturnFormat)&&void 0!==e?e:n),jn(this,void 0,void 0,(function*(){return this.getHashRate(t)}))}getHashRate(t=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(t,e){return cn(this,void 0,void 0,(function*(){const n=yield ot(t.requestManager);return Kt({format:"uint"},n,null!=e?e:t.defaultReturnFormat)}))}(this,t)}))}getGasPrice(t=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return fn(this,t)}))}getMaxPriorityFeePerGas(t=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(t,e){return cn(this,void 0,void 0,(function*(){const n=yield st(t.requestManager);return Kt({format:"uint"},n,null!=e?e:t.defaultReturnFormat)}))}(this,t)}))}calculateFeeData(t=BigInt(2),e=re.Gwei){var n;return jn(this,void 0,void 0,(function*(){const r=yield this.getBlock(void 0,!1),i=null!==(n=null==r?void 0:r.baseFeePerGas)&&void 0!==n?n:void 0;let o,a,s;try{o=yield this.getGasPrice()}catch(u){}try{a=yield this.getMaxPriorityFeePerGas()}catch(u){}return i&&(a=null!=a?a:e,s=i*t+a),{gasPrice:o,maxFeePerGas:s,maxPriorityFeePerGas:a,baseFeePerGas:i}}))}getAccounts(){var t;return jn(this,void 0,void 0,(function*(){return(null!==(t=yield At(this.requestManager))&&void 0!==t?t:[]).map((t=>ie(t)))}))}getBlockNumber(t=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return mn(this,t)}))}getBalance(e,n=this.defaultBlock,r=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(e,n,r=e.defaultBlock,i){return cn(this,void 0,void 0,(function*(){const o=Y(r)?r:Kt({format:"uint"},r,t),a=yield ct(e.requestManager,n,o);return Kt({format:"uint"},a,null!=i?i:e.defaultReturnFormat)}))}(this,e,n,r)}))}getStorageAt(e,n,r=this.defaultBlock,i=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(e,n,r,i=e.defaultBlock,o){return cn(this,void 0,void 0,(function*(){const a=Kt({format:"uint"},r,t),s=Y(i)?i:Kt({format:"uint"},i,t),u=yield lt(e.requestManager,n,a,s);return Kt({format:"bytes"},u,null!=o?o:e.defaultReturnFormat)}))}(this,e,n,r,i)}))}getCode(e,n=this.defaultBlock,r=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(e,n,r=e.defaultBlock,i){return cn(this,void 0,void 0,(function*(){const o=Y(r)?r:Kt({format:"uint"},r,t),a=yield dt(e.requestManager,n,o);return Kt({format:"bytes"},a,null!=i?i:e.defaultReturnFormat)}))}(this,e,n,r)}))}getBlock(t=this.defaultBlock,e=!1,n=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return hn(this,t,e,n)}))}getBlockTransactionCount(e=this.defaultBlock,n=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(e,n=e.defaultBlock,r){return cn(this,void 0,void 0,(function*(){let i;if($(n)){const r=Kt({format:"bytes32"},n,t);i=yield mt(e.requestManager,r)}else{const r=Y(n)?n:Kt({format:"uint"},n,t);i=yield ht(e.requestManager,r)}return Kt({format:"uint"},i,null!=r?r:e.defaultReturnFormat)}))}(this,e,n)}))}getBlockUncleCount(e=this.defaultBlock,n=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(e,n=e.defaultBlock,r){return cn(this,void 0,void 0,(function*(){let i;if($(n)){const r=Kt({format:"bytes32"},n,t);i=yield vt(e.requestManager,r)}else{const r=Y(n)?n:Kt({format:"uint"},n,t);i=yield yt(e.requestManager,r)}return Kt({format:"uint"},i,null!=r?r:e.defaultReturnFormat)}))}(this,e,n)}))}getUncle(e=this.defaultBlock,n,r=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(e,n=e.defaultBlock,r,i){return cn(this,void 0,void 0,(function*(){const o=Kt({format:"uint"},r,t);let a;if($(n)){const r=Kt({format:"bytes32"},n,t);a=yield bt(e.requestManager,r,o)}else{const r=Y(n)?n:Kt({format:"uint"},n,t);a=yield pt(e.requestManager,r,o)}return Kt(Re,a,null!=i?i:e.defaultReturnFormat)}))}(this,e,n,r)}))}getTransaction(t,e=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){const r=yield function(t,e,r=t.defaultReturnFormat){return cn(this,void 0,void 0,(function*(){const i=Kt({format:"bytes32"},e,n),o=yield gt(t.requestManager,i);return z(o)?o:Se(o,r,{fillInputAndData:!0})}))}(this,t,e);if(!r)throw new G;return r}))}getPendingTransactions(t=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(t,e){return cn(this,void 0,void 0,(function*(){return(yield wt(t.requestManager)).map((n=>Se(n,null!=e?e:t.defaultReturnFormat,{fillInputAndData:!0})))}))}(this,t)}))}getTransactionFromBlock(e=this.defaultBlock,n,r=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(e,n=e.defaultBlock,r,i){return cn(this,void 0,void 0,(function*(){const o=Kt({format:"uint"},r,t);let a;if($(n)){const r=Kt({format:"bytes32"},n,t);a=yield xt(e.requestManager,r,o)}else{const r=Y(n)?n:Kt({format:"uint"},n,t);a=yield Pt(e.requestManager,r,o)}return z(a)?a:Se(a,null!=i?i:e.defaultReturnFormat,{fillInputAndData:!0})}))}(this,e,n,r)}))}getTransactionReceipt(t,e=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){const n=yield vn(this,t,e);if(!n)throw new G;return n}))}getTransactionCount(t,e=this.defaultBlock,n=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return yn(this,t,e,n)}))}sendTransaction(t,e=this.defaultReturnFormat,n){return bn(this,t,e,n)}sendSignedTransaction(e,n=this.defaultReturnFormat,r){return function(e,n,r,i={checkRevertBeforeSending:!0}){const a=new o(((o,s)=>{setImmediate((()=>{(()=>{cn(this,void 0,void 0,(function*(){const u=new un({web3Context:e,promiEvent:a,options:i,returnFormat:r}),c=Kt({format:"bytes"},n,t),l=Wt.fromSerializedData(ne(Xt(c))),d=Object.assign(Object.assign({},l.toJSON()),{from:l.getSenderAddress().toString()});try{const{v:t,r:n,s:i}=d,a=ln(d,["v","r","s"]);yield u.checkRevertBeforeSending(a),u.emitSending(c);const s=yield Ke(e,(()=>cn(this,void 0,void 0,(function*(){return nt(e.requestManager,c)}))));u.emitSent(c);const l=Kt({format:"bytes32"},s,null!=r?r:e.defaultReturnFormat);u.emitTransactionHash(l);const f=yield Qe(e,s,null!=r?r:e.defaultReturnFormat),m=u.getReceiptWithEvents(Kt(Ge,f,null!=r?r:e.defaultReturnFormat));u.emitReceipt(m),o(yield u.handleResolve({receipt:m,tx:d})),u.emitConfirmation({receipt:m,transactionHash:s})}catch(f){s(yield u.handleError({error:f,tx:d}))}}))})()}))}));return a}(this,e,n,r)}sign(t,e,r=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(t,e,r,i=t.defaultReturnFormat){var o;return cn(this,void 0,void 0,(function*(){const a=Kt({format:"bytes"},e,n);if(null===(o=t.wallet)||void 0===o?void 0:o.get(r)){const e=t.wallet.get(r).sign(a);return Kt(Ie,e,i)}if("number"==typeof r)throw new j(e,'RPC method "eth_sign" does not support index signatures');const s=yield Rt(t.requestManager,r,a);return Kt({format:"bytes"},s,i)}))}(this,t,e,r)}))}signTransaction(t,e=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return pn(this,t,e)}))}call(t,e=this.defaultBlock,n=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return gn(this,t,e,n)}))}estimateGas(t,e=this.defaultBlock,n=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return wn(this,t,e,n)}))}getPastLogs(t,e=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return xn(this,t,e)}))}getWork(){return jn(this,void 0,void 0,(function*(){return _t(this.requestManager)}))}submitWork(t,e,n){return jn(this,void 0,void 0,(function*(){return Dt(this.requestManager,t,e,n)}))}requestAccounts(){return jn(this,void 0,void 0,(function*(){return Lt(this.requestManager)}))}getChainId(t=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return Pn(this,t)}))}getNodeInfo(){return jn(this,void 0,void 0,(function*(){return Nt(this.requestManager)}))}getProof(e,n,r=this.defaultBlock,i=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(e,n,r,i=e.defaultBlock,o){return cn(this,void 0,void 0,(function*(){const a=r.map((e=>Kt({format:"bytes"},e,t))),s=Y(i)?i:Kt({format:"uint"},i,t),u=yield Ot(e.requestManager,n,a,s);return Kt(Te,u,null!=o?o:e.defaultReturnFormat)}))}(this,e,n,r,i)}))}getFeeHistory(e,n=this.defaultBlock,r,i=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return function(e,n,r=e.defaultBlock,i,o){return cn(this,void 0,void 0,(function*(){const a=Kt({format:"uint"},n,t),s=Y(r)?r:Kt({format:"uint"},r,t),u=Kt({type:"array",items:{format:"uint"}},i,Ee),c=yield Tt(e.requestManager,a,s,u);return Kt(Oe,c,null!=o?o:e.defaultReturnFormat)}))}(this,e,n,r,i)}))}createAccessList(t,e=this.defaultBlock,n=this.defaultReturnFormat){return jn(this,void 0,void 0,(function*(){return Fn(this,t,e,n)}))}signTypedData(t,e,r,i){var o;return void 0===r&&(r=!1),void 0===i&&(i=null!==(o=this.defaultReturnFormat)&&void 0!==o?o:n),jn(this,void 0,void 0,(function*(){return function(t,e,n,r,i){return cn(this,void 0,void 0,(function*(){const o=yield Mt(t.requestManager,e,n,r);return Kt({format:"bytes"},o,null!=i?i:t.defaultReturnFormat)}))}(this,t,e,r,i)}))}subscribe(t,e,r){var i,o;return void 0===r&&(r=null!==(i=this.defaultReturnFormat)&&void 0!==i?i:n),jn(this,void 0,void 0,(function*(){const n=yield null===(o=this.subscriptionManager)||void 0===o?void 0:o.subscribe(t,e,r);return n instanceof kn&&"logs"===t&&"object"==typeof e&&!oe(e.fromBlock)&&Number.isFinite(Number(e.fromBlock))&&setImmediate((()=>{this.getPastLogs(e).then((t=>{for(const e of t)n._processSubscriptionResult(e)})).catch((t=>{n._processSubscriptionError(t)}))})),n}))}static shouldClearSubscription({sub:t}){return!(t instanceof Bn)}clearSubscriptions(t=!1){var e;return null===(e=this.subscriptionManager)||void 0===e?void 0:e.unsubscribe(t?In.shouldClearSubscription:void 0)}}const On=t=>{if(z(t.gas)||!tt(t.gas)||z(t.gasPrice)||!tt(t.gasPrice))throw new L({gas:t.gas,gasPrice:t.gasPrice});if(!z(t.maxFeePerGas)||!z(t.maxPriorityFeePerGas))throw new N({maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas})},Tn=t=>{if(!z(t.gasPrice)&&"0x2"===t.type)throw new W(t.gasPrice);if("0x0"===t.type||"0x1"===t.type)throw new N({maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas});if(z(t.maxFeePerGas)||!tt(t.maxFeePerGas)||z(t.maxPriorityFeePerGas)||!tt(t.maxPriorityFeePerGas))throw new U({maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas})},Sn=(e,n)=>{if(!z(n))return void n(e);if("object"!=typeof e||z(e))throw new I(e);(t=>{if(!z(t.common)){if(z(t.common.customChain))throw new T;if(z(t.common.customChain.chainId))throw new S;if(!z(t.chainId)&&t.chainId!==t.common.customChain.chainId)throw new M({txChainId:t.chainId,customChainId:t.common.customChain.chainId})}})(e),(t=>{if(!z(t.common)&&!z(t.chain)&&!z(t.hardfork))throw new H;if(!z(t.chain)&&z(t.hardfork)||!z(t.hardfork)&&z(t.chain))throw new E({chain:t.chain,hardfork:t.hardfork})})(e),(t=>{if(!z(t.common)&&!z(t.common.baseChain)&&!z(t.chain)&&t.chain!==t.common.baseChain)throw new q({txChain:t.chain,baseChain:t.common.baseChain})})(e),(t=>{if(!z(t.common)&&!z(t.common.hardfork)&&!z(t.hardfork)&&t.hardfork!==t.common.hardfork)throw new A({txHardfork:t.hardfork,commonHardfork:t.common.hardfork})})(e);const r=Se(e,t);if((t=>{const e=!z(t.gas)||!z(t.gasLimit),n=e&&!z(t.gasPrice),r=e&&!z(t.maxPriorityFeePerGas)&&!z(t.maxFeePerGas);if(!n&&!r)throw new _({gas:t.gas,gasPrice:t.gasPrice,maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas});if(n&&r)throw new D({gas:t.gas,gasPrice:t.gasPrice,maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas});(n?On:Tn)(t),(!z(t.type)&&t.type>"0x1"?Tn:On)(t)})(r),z(r.nonce)||z(r.chainId)||r.nonce.startsWith("-")||r.chainId.startsWith("-"))throw new O({nonce:e.nonce,chainId:e.chainId})};var Mn=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};const Hn=(e,n,r,i=!1,o=!0)=>Mn(void 0,void 0,void 0,(function*(){var a;const s=Se(yield(a={transaction:e,web3Context:n,privateKey:r,fillGasPrice:i,fillGasLimit:o},_e(void 0,void 0,void 0,(function*(){var t;return(null!==(t=a.web3Context.transactionBuilder)&&void 0!==t?t:Ne)(Object.assign(Object.assign({},a),{transaction:a.transaction}))}))),t);return Sn(s),Wt.fromTxData((t=>{var e,n;return{nonce:t.nonce,gasPrice:t.gasPrice,gasLimit:null!==(e=t.gasLimit)&&void 0!==e?e:t.gas,to:t.to,value:t.value,data:null!==(n=t.data)&&void 0!==n?n:t.input,type:t.type,chainId:t.chainId,accessList:t.accessList,maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas}})(s),((t,e)=>{var n,r,i,o,a,s,u,c,l,d,f,m,h,v,y,b,p,g;let w;if((z(t.chain)||z(t.hardfork))&&z(t.common))e.defaultCommon?(w=Object.assign({},e.defaultCommon),z(w.hardfork)&&(w.hardfork=null!==(n=t.hardfork)&&void 0!==n?n:e.defaultHardfork),z(w.baseChain)&&(w.baseChain=e.defaultChain)):w=zt.custom({name:"custom-network",chainId:ae(t.chainId),networkId:z(t.networkId)?void 0:ae(t.networkId),defaultHardfork:null!==(r=t.hardfork)&&void 0!==r?r:e.defaultHardfork},{baseChain:e.defaultChain});else{const n=null!==(s=null!==(a=null===(o=null===(i=null==t?void 0:t.common)||void 0===i?void 0:i.customChain)||void 0===o?void 0:o.name)&&void 0!==a?a:t.chain)&&void 0!==s?s:"custom-network",r=ae(null!==(l=null===(c=null===(u=null==t?void 0:t.common)||void 0===u?void 0:u.customChain)||void 0===c?void 0:c.chainId)&&void 0!==l?l:null==t?void 0:t.chainId),x=ae(null!==(m=null===(f=null===(d=null==t?void 0:t.common)||void 0===d?void 0:d.customChain)||void 0===f?void 0:f.networkId)&&void 0!==m?m:null==t?void 0:t.networkId),P=null!==(y=null!==(v=null===(h=null==t?void 0:t.common)||void 0===h?void 0:h.hardfork)&&void 0!==v?v:null==t?void 0:t.hardfork)&&void 0!==y?y:e.defaultHardfork,F=null!==(g=null!==(p=null===(b=t.common)||void 0===b?void 0:b.baseChain)&&void 0!==p?p:t.chain)&&void 0!==g?g:e.defaultChain;r&&x&&n&&(w=zt.custom({name:n,chainId:r,networkId:x,defaultHardfork:P},{baseChain:F}))}return{common:w}})(s,n))}));export{Me as A,Cn as N,In as W,He as a,Re as b,gn as c,an as d,Fn as e,wn as f,xn as g,Se as h,dn as i,Hn as p,Gn as r,bn as s};
